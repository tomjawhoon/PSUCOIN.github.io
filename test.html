<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Francois+One&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
</head>
<style>
    body{
    background: -webkit-linear-gradient(left, #0072ff, #00c6ff);
}
.contact-form{
    background: #fff;
    margin-top: 10%;
    margin-bottom: 5%;
    width: 70%;
}
.contact-form .form-control{
    border-radius:1rem;
}
.contact-image{
    text-align: center;
}
.contact-image img{
    border-radius: 6rem;
    width: 11%;
    margin-top: -3%;
    transform: rotate(29deg);
}
.contact-form form{
    padding: 14%;
}
.contact-form form .row{
    margin-bottom: -7%;
}
.contact-form h3{
    margin-bottom: 8%;
    margin-top: -10%;
    text-align: center;
    color: #0062cc;
}
.contact-form .btnContact {
    width: 50%;
    border: none;
    border-radius: 1rem;
    padding: 1.5%;
    background: #dc3545;
    font-weight: 600;
    color: #fff;
    cursor: pointer;
}
.btnContactSubmit
{
    width: 50%;
    border-radius: 1rem;
    padding: 1.5%;
    color: #fff;
    background-color: #0062cc;
    border: none;
    cursor: pointer;
}
</style>

<body>

    <!DOCTYPE html>
    <html>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"
            id="bootstrap-css">
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <!-- <link rel="stylesheet" href="style.css"> -->
        <link href="https://fonts.googleapis.com/css?family=Francois+One&display=swap" rel="stylesheet">
        <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
        <script src="/front/js/jquery.qrcode.min.js"></script>
        <script src="https://cozmo.github.io/jsQR/jsQR.js"></script>
    </head>


    <body>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <!------ Include the above in your HEAD tag ---------->
        
        <div class="container contact-form">
                    <div class="contact-image">
                        <img src="https://image.ibb.co/kUagtU/rocket_contact.png" alt="rocket_contact"/>
                    </div>
                    <form method="post">
                        <h3>Drop Us a Message</h3>
                       <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" name="txtName" class="form-control" placeholder="Your Name *" value="" />
                                </div>
                                <div class="form-group">
                                    <input type="text" name="txtEmail" class="form-control" placeholder="Your Email *" value="" />
                                </div>
                                <div class="form-group">
                                    <input type="text" name="txtPhone" class="form-control" placeholder="Your Phone Number *" value="" />
                                </div>
                                <div class="form-group">
                                    <input type="submit" name="btnSubmit" class="btnContact" value="Send Message" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <textarea name="txtMsg" class="form-control" placeholder="Your Message *" style="width: 100%; height: 150px;"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
        </div>

    </body>



    <script src="./web3.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- <script src="./psulogin.js"></script>  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script>
        function gotoSendETH() {
            window.location.href = window.location.href.replace('balance', 'send', 'index')
        }

        function gotoindex() {
            // window.location.href = url.replace('send', 'balance')
            window.location.href = url.replace('balance', 'index', 'send')
        }

        function gotoPayment() {
            // window.location.href = url.replace('send', 'balance')
            window.location.href = url.replace('balance', 'camera', 'send')
        }

        function gotoReceive() {
            // window.location.href = url.replace('send', 'balance')
            window.location.href = url.replace('balance', 'Receive', 'send')
        }




    </script>
    <script>


        var modal = document.getElementById('id01');

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        var url;
        var id;
        (() => {
            url = window.location.href
            id = url.split('/').slice(-1).toString() // ไอดี ของผู้ login
        })()




       /* axios({
            method: 'GET',
            url: '/getProfileforbalance', //ส่งไปค่านี้
            headers: {
                id: id  // รหัสนักศึกษา
            }
        }).then(result => { // ดึงค่ามาใส่ใน input ด้วย axios โดยตรง
            console.log("result_data_balance", result.data)
            $("#result").attr("href", result.data)
            $("#result").text(result.data)
            // $("#result").val()
        })*/

        axios({
            method: 'GET',
            url: '/getWalletById', //ส่งไปค่านี้
            headers: {
                id: id // รหัสนักศึกษา
            }
        }).then(result => { // ดึงค่ามาใส่ใน input ด้วย axios โดยตรง
            console.log("result_data", result)
            $('#fromAddress').val(result.data.address)
            $('#privateKey').val(result.data.privateKey)
            $('#showid').val(result.config.headers.id)
        }).catch(result => {
            console.log("errr")
        })

        document.querySelector('#submitSend').addEventListener('submit', e => {
            e.preventDefault()
            axios({ // ส่งค่าทั้งหมดไปๆ ยัง ฝั่ง nodejs
                method: 'GET',
                url: '/send/' + id + '/confirm', // ส่งไปยังค่านี้
                headers: {
                    fromAddress: $('#fromAddress').val(),
                    toAddress: $('#toAddress').val(),
                    privateKey: $('#privateKey').val(),
                    money: $('#money').val(),
                    TEST: 'test string'
                }
            }).then(result => {
                if (result != '') {
                    $(() => {
                        $(document).ready(() => {
                            console.log("Show === result === Modal")
                            $("#id01").hide();
                            console.log("SUCCESS")
                            // window.location.href = url.replace('send', 'SUCCESS')
                        });

                        let link = "https://kovan.etherscan.io/tx/" + result.data.split('"')[1]
                        $("#result").attr("href", link)
                        $("#result").text(link)
                    });
                    // if (result == ''){
                    //   console.log("NOTSUCCESS")
                    //   window.location.href = url.replace('send', 'NOTSUCCESS', 'send')
                    // }
                    // $("#result").val()
                }

            }).catch(result => {
                console.log("errr")
            })
        })


        document.querySelector('#toAddress').addEventListener('keyup', e => {
            if (e.target.value) {
                axios({
                    method: 'GET',
                    url: '/getProfileById', //ส่งไปค่านี้
                    headers: {
                        id: e.target.value  // รหัสนักศึกษา
                    }
                }).then(result => { // ดึงค่ามาใส่ใน input ด้วย axios โดยตรง
                    $('#receiverName').val(result.data.name)
                    $('#receiverLastName').val(result.data.lastName)
                    $('#receiverLastID').val(result.data.id)
                })
            }

        })

        document.querySelector('#toAddress').addEventListener('keyup', e => {
            if (e.target.value) {
                axios({
                    method: 'GET',
                    url: '/getProfileforbalance', //ส่งไปค่านี้
                    headers: {
                        id: e.target.value,
                        value1: $('#value1').val(), // รหัสนักศึกษา
                    }
                }).then(result => { // ดึงค่ามาใส่ใน input ด้วย axios โดยตรง
                    console.log("testapi_getProfileforbalance", result)
                    $('#value1').val(result)
                })
            }
        })

    </script>


</body>

</html>